<script>
import { mapState } from 'vuex'
import collectItem from '@/components/collect.vue'
import { removeMusicFormList, removeToken } from '@/utils/storage'
export default {
  name: 'navbarView',
  components: {
    collectItem
  },
  methods: {
    logout () {
      removeToken()
      removeMusicFormList()
      location.reload()
    }
  },
  computed: {
    ...mapState('user', ['userInfo']),
    isLogin () {
      return this.$store.getters.token
    }
  },
  created () {
  }
}
</script>

<template>
  <div class="navbar">
    <a href="/#/login" class="login" v-if="isLogin === ''">
      <div class="avatar" style="width: 40px; height: 40px; font-size: 20px;">
          <span>
            <svg class="icon-avatar" viewBox="0 0 1024 1024"  xmlns="http://www.w3.org/2000/svg" width="20" height="20"><path d="M501.041414 62.931285c125.654838 0 227.51269 100.19498 227.51269 223.775576 0 123.605156-101.856829 223.805252-227.51269 223.805252-125.650745 0-227.506551-100.199073-227.506551-223.805252C273.53384 163.097612 375.424438 62.931285 501.041414 62.931285L501.041414 62.931285 501.041414 62.931285zM501.041414 62.931285c125.654838 0 227.51269 100.19498 227.51269 223.775576 0 123.605156-101.856829 223.805252-227.51269 223.805252-125.650745 0-227.506551-100.199073-227.506551-223.805252C273.53384 163.097612 375.424438 62.931285 501.041414 62.931285L501.041414 62.931285 501.041414 62.931285zM415.730423 585.125461l189.629895 0c162.314783 0 293.880237 129.387859 293.880237 289.057395l0 18.622126c0 62.922075-131.593084 65.313541-293.880237 65.313541L415.730423 958.118524c-162.319899 0-293.880237-0.092098-293.880237-65.313541l0-18.622126C121.852232 714.51332 253.411547 585.125461 415.730423 585.125461L415.730423 585.125461 415.730423 585.125461z" fill="#fff" p-id="4553"></path></svg>
          </span>
      </div>
      <div class="text">
        点击登录
        <svg class="icon" viewBox="0 0 1024 1024"  xmlns="http://www.w3.org/2000/svg" width="15" height="15"><path d="M282.7264 1004.714667c8.738133 0 17.476267-3.345067 24.132267-10.001067l458.615467-458.5472c13.346133-13.346133 13.346133-34.9184 0-48.264533L306.858667 29.2864c-13.346133-13.346133-34.9184-13.346133-48.264533 0s-13.346133 34.9184 0 48.264533L693.077333 512 258.594133 946.449067c-13.346133 13.346133-13.346133 34.9184 0 48.264533C265.250133 1001.3696 273.988267 1004.714667 282.7264 1004.714667z"  p-id="5743"></path></svg>
      </div>
    </a>
    <a class="login" v-else-if="isLogin !== ''">
      <div class="avatar" style="width: 40px; height: 40px; font-size: 20px;">
        <el-avatar :src="userInfo?.avatar">
          {{userInfo.name?.slice(0,1).toUpperCase()}}
        </el-avatar>
      </div>
      <div class="text" @click="$router.push('/my')">
        {{userInfo?.name}}
      </div>
      <svg @click="logout" class="close" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20"><path d="M783.92332 467.520619l-108.097715-108.137692 60.295258-60.295259L917.05661 480.023415l30.142632 30.152626-211.078379 211.078378-60.295258-60.345229 108.097715-108.097715H331.024277V467.530613h452.899043z m-197.046463 556.479361H160.712409a85.470752 85.470752 0 0 1-60.485149-25.02558 85.458759 85.458759 0 0 1-25.055563-60.475155V86.080401C75.171697 38.877599 113.429653 0.579666 160.712409 0.579666h426.164448v85.280862h-383.479043a42.600454 42.600454 0 0 0-42.945255 42.305624v768.247342c0 22.896807 19.188943 42.29563 42.945255 42.29563h383.479043v85.290856z m0 0"></path></svg>
    </a>

    <div class="scrollbar">
      <div class="scrollbar-container">
        <div class="menu">
          <a href="/#/home">
            <div class="menu-item " :class="{activeItem : '/home' === this.$route.path}">
              <span class="icon active" >
                <svg class="icon" viewBox="0 0 1024 1024"  xmlns="http://www.w3.org/2000/svg" width="14" height="14"><path d="M979.84 404.544L574.272 84c-34.912-27.648-89.696-27.616-124.576 0L44.16 404.544c-13.856 10.976-16.224 31.104-5.28 44.96s30.624 16.224 44.48 5.28L96 444.416V832c0 54.944 57.888 96 108.8 96h640c50.304 0 83.2-38.592 83.2-96V445.92l11.68 8.864c5.888 4.64 13.12 6.88 20.064 6.88 9.44 0 18.912-4.16 25.216-12.16 10.976-13.856 8.768-33.984-5.12-44.96zM480 864V686.592c0-8.832 16-13.248 32-13.248s32 4.416 32 13.248V864h-64z m384-32c0 21.216-5.856 32-19.2 32H608.64c0-0.48-0.64-0.864-0.64-1.344V686.592c0-37.216-30.016-77.28-96-77.28s-96 40.064-96 77.28v176.064c0 0.48 0.864 0.864 0.864 1.344H204.8c-20.064 0-44.8-17.344-44.8-32V393.824l328.928-259.616c11.808-9.344 33.12-9.344 44.96 0L864 395.328V832z"  p-id="7037"></path></svg>
              </span>
              <span class="title active">
                首页
              </span>
            </div>
          </a>
          <a href="/#/explore">
            <div class="menu-item" :class="{activeItem : this.$route.matched[1].path === '/explore'}">
              <span class="icon">
                <svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="14" height="14"><path d="M455.521173 201.662953c-51.697429 0-93.773733 42.074258-93.773733 93.77271 0 51.702546 42.076304 93.77885 93.773733 93.77885 51.704592 0 93.777827-42.076304 93.777827-93.77885C549.298999 243.736187 507.225765 201.662953 455.521173 201.662953zM455.521173 326.694597c-17.22122 0-31.257911-14.033621-31.257911-31.258934 0-17.223267 14.036691-31.255865 31.257911-31.255865 17.22429 0 31.260981 14.033621 31.260981 31.255865C486.783177 312.659953 472.745463 326.694597 455.521173 326.694597z" p-id="5380"></path><path d="M314.863642 451.730335c-43.078121 0-78.148871 35.069727-78.148871 78.142731 0 43.10575 35.07075 78.146824 78.148871 78.146824 43.070958 0 78.144778-35.041074 78.144778-78.146824C393.009444 486.800062 357.9346 451.730335 314.863642 451.730335zM314.863642 545.499975c-8.630564 0-15.628956-6.996344-15.628956-15.626909 0-8.626471 6.998391-15.629979 15.628956-15.629979 8.626471 0 15.625886 7.004531 15.625886 15.629979C330.489528 538.503631 323.491137 545.499975 314.863642 545.499975z" p-id="5381"></path><path d="M687.27956 693.851745c-11.57257-11.568477-27.840068-18.306948-44.205804-18.306948-16.368806 0-32.631188 6.738471-44.205804 18.306948-11.57257 11.57564-18.310018 27.847232-18.310018 44.205804 0 16.362666 6.734378 32.635281 18.306948 44.209898 11.574616 11.568477 27.843138 18.306948 44.208874 18.306948 16.368806 0 32.628118-6.738471 44.202735-18.306948 11.57564-11.57564 18.313088-27.847232 18.313088-44.209898C705.589578 721.698976 698.85213 705.427384 687.27956 693.851745z" p-id="5382"></path><path d="M886.010741 279.053554c25.13547-37.312814 43.149752-69.562309 53.618175-96.03831 16.757662-42.383296 15.035438-74.090439-5.115508-94.241384-8.112772-8.110725-23.211654-23.212678-48.730864-20.408819-14.0766 1.545192-28.224832 7.80578-56.415894 20.278859-13.469779 5.960759-30.235628 13.379729-51.600215 22.330588-16.160051 6.77224-23.772426 25.362644-17.001209 41.523719 6.77224 16.163121 25.364691 23.774473 41.524742 17.002232 21.942755-9.194406 39.026852-16.753569 52.754504-22.827915 12.960173-5.734608 25.372877-11.226692 32.598442-13.782911-0.246617 8.855692-5.991458 42.445718-65.763796 127.419018-59.276035 84.274382-151.253866 190.017728-258.990612 297.753451C459.303312 661.651368 353.955986 751.018745 265.355065 810.547537c-3.260254 0.861624-6.440689 2.230808-9.4093 4.197602-73.948199 48.941666-112.860441 60.563354-127.005602 61.391209 0.865717-11.82328 9.128915-47.810912 66.210981-131.001613 8.884344-12.950963 6.824429-30.132274-4.090155-40.698934-33.642215-57.223283-51.394531-122.514311-51.394531-189.305507 0-206.253504 167.799704-374.053208 374.053208-374.053208 72.623018 0 108.129696 9.576099 171.736363 36.549427 16.132422 6.843872 34.755572-0.691755 41.596374-16.822131 6.840802-16.132422-0.691755-34.755572-16.822131-41.596374C642.417817 90.451058 597.952092 77.621868 513.720689 77.621868c-116.862591 0-226.731908 45.509497-309.364907 128.143519C121.720737 288.398386 76.212264 398.266679 76.212264 515.130294c0 74.40664 18.86158 147.242506 54.682413 211.868385-25.425066 38.677904-43.635823 72.221882-54.205553 99.899244-16.562211 43.364647-14.729469 75.584466 5.450129 95.763041 11.210319 11.210319 25.876344 16.85897 44.364417 16.85897 34.604122-0.00307 82.578764-19.816325 146.154731-60.013839 72.92387 50.077535 158.016897 76.471672 247.145843 76.471672 116.861568 0 226.728838-45.511543 309.363883-128.143519 82.634022-82.636069 128.143519-192.502315 128.143519-309.363883C957.310623 432.633395 932.712389 350.266455 886.010741 279.053554zM519.803221 892.52255c-66.9846 0-131.288139-17.439184-188.201359-50.722218 84.915995-60.758806 181.453678-144.164401 276.157597-238.871389 94.662986-94.659917 177.679725-188.183963 238.078327-267.919982 31.510668 55.772234 48.01762 118.445646 48.01762 183.461405C893.855406 724.721823 726.055702 892.52255 519.803221 892.52255z" p-id="5383"></path></svg>
              </span>
              <span class="title">
                探索
              </span>
            </div>
          </a>
          <collectItem></collectItem>
        </div>
      </div>
    </div>
  </div>
</template>

<style scoped lang="less">
.navbar{
  overflow: hidden;
}
.login{
  display: flex;
  line-height: 1.5rem;
  padding-left: .75rem;
  padding-right: .75rem;
  margin: 2rem 0 20px 0;
  align-items: center;

  .avatar{
    display: inline-flex;
    justify-content: center;
    align-items: center;
    border-radius: 50%;
    background-color: rgb(201,205,212);
  }

  .text{
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex: 1 1 0;
    margin-left: 1rem;
    cursor: pointer;
    font-size: 18px;
    fill: #000000;
    transition: color .5s;
    svg{
      display: inline-block;
      margin-left: auto;
      font-style: normal;
    }
    &:hover{
      fill: #409EFF;
      color: #409EFF;
      transition: fill .5s;
    }
  }

  .close{
    fill: #c9cdd4;
    &:hover{
      fill: #409EFF;
      transition: fill .5s;
    }
  }

}
.scrollbar{
  .menu{
    padding: 4px 8px;
    height: 100%;
    width: 100%;
    font-size: 14px;

    .activeItem{
      background-color: #409EFF;
      transition: background-color .3s;
      color: #fff;
      .icon{
        fill: #ffffff;
      }
    }
    .menu-item{
      border-radius: 4px;
      display: flex;
      align-items: center;
      padding: 0 12px;
      margin-bottom: 6px;
      fill: #000000;
      .icon{
        svg{
          margin-top: 4px;
          margin-right: 16px;
        }
      }
      .title{
        white-space: nowrap;
        line-height: 40px;
        width: 100%;
      }
    }
  }
}
</style>
